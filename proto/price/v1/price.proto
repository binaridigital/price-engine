// path: proto/price/v1/price.proto
syntax = "proto3";

package price.v1;
option go_package = "github.com/binaridigital/price-engine/proto/price/v1;pricev1";

message SubscribeRequest {
  string symbol = 1;        // e.g., "BTCUSDT", "EURUSD"
  int64  interval_ms = 2;   // e.g., 1000
}

enum InstrumentType {
  IT_UNSPECIFIED = 0;
  IT_CRYPTO_SPOT = 1;
  IT_FX_SPOT     = 2;
}

enum PriceType {
  PT_UNSPECIFIED = 0;
  PT_TRADE = 1; // comes from an executed trade (e.g., crypto)
  PT_BID   = 2;
  PT_ASK   = 3;
  PT_MID   = 4; // (bid+ask)/2 or provider mid
}

message Candle {
  string symbol = 1;
  int64  window_start_ms = 2;
  int64  window_end_ms   = 3;
  double open  = 4;
  double high  = 5;
  double low   = 6;
  double close = 7;
  double volume = 8;
  double vwap   = 9;
  bool   is_final = 10;
  string exchange = 11;      // data source/provider
  int64  last_trade_ts = 12; // or last quote ts
  uint64 trade_count = 13;

  // New fields (ISO/regulator-aligned)
  InstrumentType instrument_type = 14;
  PriceType      price_type      = 15;
  string         base_ccy        = 16; // ISO 4217, e.g., "EUR"
  string         quote_ccy       = 17; // ISO 4217, e.g., "USD"
}
